<h1>Browse Accommodations</h1>

<form method="get">
    <input type="text" name="type" placeholder="Type" value="{{ filters.type }}">
    <input type="number" name="max_price" placeholder="Max Price" value="{{ filters.max_price }}">
    <input type="number" step="0.1" name="max_distance" placeholder="Max Distance (km)" value="{{ filters.max_distance }}">

    <label>Sort by:</label>
    <select name="sort_by" onchange="this.form.submit()">
        <option value="">-- Select --</option>
        <option value="price" {% if filters.sort_by == 'price' %}selected{% endif %}>Price</option>
        <option value="distance" {% if filters.sort_by == 'distance' %}selected{% endif %}>Distance</option>
    </select>

    <button type="submit">Search</button>
</form>

<hr/>

<!-- 展示accomodation信息 -->
{% for acc in accommodations %}
    <div style="margin-bottom: 20px;">
        <h3>{{ acc.type }} — {{ acc.price }} HKD</h3>
        <p>Distance: {{ acc.distance }} km</p>
        <p><strong>Address:</strong> {{ acc.address }}</p>

        {% if acc.is_reserved %}
            <p style="color: red;"><strong>Status:</strong> Reserved</p>
        {% else %}
            <p style="color: green;"><strong>Status:</strong> Available</p>
        {% endif %}

        <a href="{% url 'accommodation_detail' acc.address %}">View Details</a>
    </div>
{% endfor %}


<!-- 添加logout -->
<p style="text-align:right;">
    Logged in as: {{ request.session.member_name }} |
    <a href="{% url 'logout' %}">Logout</a>
</p>


